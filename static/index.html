<!DOCTYPE html>
<meta charset="UTF-8" />
<html>
  <head>
    <title>bg++</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="static/css/index.css" />

    <link
      rel="stylesheet"
      href="static/css/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="static/js/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <script src="static/js/jquery.js"></script>

    <link
      href="static/css/select2.css"
      rel="stylesheet"
    />
    <script src="static/js/select2.js"></script>

    <script
      data-goatcounter="https://goat.hepicgamerz.com/count"
      src="static/js/count.js"
    ></script>

    <script src="static/js/script.js"></script>
    <script src="static/js/mapLayers.js"></script>

    <script>
      let pics = {
        bg: "static/Pics/beograd.jpg",
        ns: "static/Pics/novi-sad.jpg",
        nis: "static/Pics/nis.jpg",
      };

      function changeBg(city) {
        document.body.style.backgroundImage = `url('${pics[city]}')`;
      }
    </script>
  </head>
  <body class="body" onload="toggleTable()">
    <h1>srbus</h1>
    <h3>Fixamo fix ideje since 2023</h3>

    <form id="myForm">
      <select id="city" name="city" onchange="onCityChange()"></select>
      <br />
      <br />

      <label for="searchMode">Tip pretrage:</label>
      <select id="searchMode" name="searchMode" onchange="onSearchModeChange()">
        <option value="id">ID stanice</option>
        <option value="name">Ime stanice</option>
        <option value="coords">Lokacija</option>
        <option value="address" disabled>Adresa (USKORO)</option>
        <option value="favorites" disabled>Omiljene stanice (USKORO)</option>
      </select>
      <br />
      <br />

      <div class="id-search" style="display: none">
        <label class="id-search" for="id-input">ID stanice:</label>
        <input
          type="text"
          id="id-input"
          type="number"
          inputmode="numeric"
        /><br />
        <br />
      </div>

      <div class="name-search" style="display: none">
        <label for="name-input">Ime/ID stanice:</label>
        <select
          class="select2"
          id="name-input"
          onchange="toggleTable()"
        ></select>
        <br />
        <br />
      </div>

      <div class="coords-search" style="display: none">
        <button type="button" onclick="searchByGPS()">
          Pronadji najbliže stanice
        </button>
        <br />
        <br />
        <label for="stationsMaxDistance">Najveća udaljenost (m):</label>
        <input
          type="number"
          id="stationsMaxDistance-input"
          name="stationsMaxDistance-input"
          value="300"
        />
        <br />
        <br />
        <label for="coords-input">Stanica:</label>
        <select
          class="select2"
          id="coords-input"
          onchange="toggleTable()"
          style="display: none"
        ></select>
        <br />
        <br />
      </div>

      <input id="submit" type="submit" value="Kad će mi bus?" />
    </form>
    <br />

    <label for="dataSaver">Ušteda podataka:</label>
    <input type="checkbox" id="dataSaver" name="dataSaver" checked /> <br />
    <br />

    <label for="sort-lines">Sortiranje linija:</label>
    <input type="checkbox" id="sort-lines" name="sort-lines" checked onchange="if(currQuery) submitHandlers[getSearchMode()]()" /> <br />

    <div id="result">
      <p id="stationName"></p>
      <p id="lastUpdated"></p>
      <p id="updateInProgress" style="display: none">Ažuriranje u toku...</p>
      <p id="error" style="display: none">Greška pri ažuriranju!</p>
      <br />

      <table id="tabela" border="2">
        <thead id="thead" class="thead-dark">
          <tr>
            <th scope="col">Linija</th>
            <th scope="col">ETA</th>
            <th scope="col">Stanice</th>
            <th scope="col">Trenutna stanica</th>
            <th scope="col">ID vozila</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>

      <div id="map"></div>
    </div>
  </body>
</html>
